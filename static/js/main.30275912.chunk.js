(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,n){e.exports=n(35)},35:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(22),s=n.n(o),i=n(9);var c=function(){return r.a.createElement("div",{className:"menu"},r.a.createElement(i.b,{to:"/minesweeper"},"Minesweeper"))},l=n(7);function u(){return r.a.createElement(l.b,{render:function(){return r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/minesweeper",component:w}),r.a.createElement(l.a,{from:"/",to:"/minesweeper",component:function(){return null}}),r.a.createElement(l.a,{from:"*",to:"/",component:function(){return null}}))}})}var m=n(2),h=n.n(m),d=n(6),f=n(11),g=n(12),p=n(14),v=n(13),b=n(15),E=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={start:0,seconds:0,minutes:0,timer:"00:00.0",status:"clear"},n.startTimer=Object(d.a)(h.a.mark(function e(){var t;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.timerInterval||"cleared"===n.timerInterval){e.next=2;break}return e.abrupt("return");case 2:return t=n.state.seconds+60*n.state.minutes,e.next=5,setInterval(Object(d.a)(h.a.mark(function e(){var a,r,o,s;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.state.start||Date.now(),r=(Date.now()-a)/1e3+t,o=Math.floor(r/60),r-=60*o,s="".concat(String(o).padStart(2,"0"),":").concat(r.toFixed(1).padStart(4,"0")),e.next=7,n.setState({start:a,seconds:r,minutes:o,timer:s});case 7:case"end":return e.stop()}},e)})),100);case 5:n.timerInterval=e.sent;case 6:case"end":return e.stop()}},e)})),n.clearInterval=function(){clearInterval(n.timerInterval),n.timerInterval="cleared"},n.pauseTimer=Object(d.a)(h.a.mark(function e(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.clearInterval(),n.setState({start:0});case 2:case"end":return e.stop()}},e)})),n.clearTimer=function(){n.clearInterval(),n.setState({start:0,seconds:0,minutes:0,timer:"00:00.0"})},n}return Object(b.a)(t,e),Object(g.a)(t,[{key:"componentWillUnmount",value:function(){this.clearTimer()}},{key:"render",value:function(){var e=this.state,t=(e.start,e.timer);return r.a.createElement("div",{className:"counter"},r.a.createElement("h3",null,"Time:")," ",r.a.createElement("h3",null,t))}}]),t}(a.Component),w=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={size:[],mineCount:0,flagCount:0,board:[],started:!1,ended:!1,victory:!1,holdLeft:!1,holdRight:!1,releaseTime:0},n.createBoard=function(){var e=Object(d.a)(h.a.mark(function e(t){var a,r,o,s,i,c;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.canvas.addEventListener("mouseup",n.onMouseUp),n.canvas.addEventListener("mousedown",n.onMouseDown),a=[n.state.size||0,n.state.mineCount||0,[]],r=a[0],o=a[1],s=a[2],t||n.state.size.length){e.next=5;break}return e.abrupt("return");case 5:for("small"===t?(r=[8,8],o=10):"medium"===t?(r=[16,16],o=40):"large"===t&&(r=[24,24],o=99),i=0;i<r[0];i++)for(s[i]=[],c=0;c<r[1];c++)s[i].push({mine:0,flag:0,open:0,neighborMines:0,pos:[i,c],highlighted:0});return n.setMines(r,o,s),console.log("Board initialized =>",s),e.next=11,n.setState({size:r,mineCount:o,board:s});case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.setMines=function(e,t,a,r){for(var o=function(e){return Math.floor(Math.random()*e)},s=0;s<t;){var i=o(e[0]),c=o(e[1]),l=String(i).padStart(2,"0")+String(c).padStart(2,"0");r&&r.includes(l)||1!==a[i][c].mine&&(a[i][c].mine=1,s++)}n.setNeighborCounts(a)},n.setNeighborCounts=function(e){for(var t=0,a=e.length;t<a;t++)for(var r=0,o=e[t].length;r<o;r++){var s=n.getNeighborCells(t,r,0,e).neighborMines;e[t][r].neighborMines=s}},n.getNeighborCells=function(e,t,n,a){for(var r=[],o=[],s=0,i=0,c=-1;c<=1;c++)for(var l=-1;l<=1;l++)if(e+c>=0&&e+c<a.length&&t+l>=0&&t+l<a[e].length){if(!n&&0===c&&0===l)continue;r.push(a[e+c][t+l]),o.push("".concat(String(e+c).padStart(2,"0")).concat(String(t+l).padStart(2,"0"))),s+=a[e+c][t+l].mine,a[e+c][t+l].flag%3===1&&i++}return{neighborPos:o,neighborCells:r,neighborMines:s,neighborFlags:i}},n.ensureSafeFirstClick=function(e,t,a){var r=n.getNeighborCells(e,t,1,a),o=r.neighborCells,s=r.neighborPos,i=0;o.forEach(function(e){a[e.pos[0]][e.pos[1]].mine&&(a[e.pos[0]][e.pos[1]].mine=0,i++)}),n.setMines(n.state.size,i,a,s)},n.cascade=function(e,t,a){n.getNeighborCells(e,t,0,a).neighborCells.forEach(function(e){var t=e.pos[0],r=e.pos[1];a[t][r].neighborMines?a[t][r].open||(a[t][r].open=1):a[t][r].neighborMines||a[t][r].open||(a[t][r].open=1,n.cascade(t,r,a))})},n.openNeighborCells=function(e,t,a){var r=a[e][t],o=n.getNeighborCells(e,t,0,a),s=o.neighborFlags,i=o.neighborCells;s===r.neighborMines&&i.forEach(function(e){e.flag||e.open||n.openCell(e.pos[0],e.pos[1],a)})},n.openAllMines=function(e){e.forEach(function(t){t.forEach(function(t){t.mine&&(e[t.pos[0]][t.pos[1]].open=1)})})},n.countOpenCells=function(e){var t=0;return e.forEach(function(e){e.forEach(function(e){e.open&&t++})}),t},n.openCell=function(){var e=Object(d.a)(h.a.mark(function e(t,a,r){var o,s,i,c,l;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.state.ended&&!r[t][a].open){e.next=2;break}return e.abrupt("return");case 2:return n.state.started||n.ensureSafeFirstClick(t,a,r),n.timer.state.start||n.timer.startTimer(),o=r[t][a],r[t][a].open=1,0!==o.neighborMines||o.mine||n.cascade(t,a,r),s=n.state.size[0]*n.state.size[1]-n.state.mineCount,i=n.countOpenCells(r),c=n.state.ended,l=n.state.victory,o.mine?(c=!0,n.openAllMines(r)):i===s&&(c=!0,l=!0),c&&n.timer.pauseTimer(),e.next=15,n.setState({board:r,ended:c,victory:l,started:!0});case 15:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),n.countFlags=function(e){var t=0;return e.forEach(function(e){e.forEach(function(e){e.flag%3===1&&t++})}),t},n.setFlag=function(e,t,a){if(!a[e][t].open&&n.state.started){a[e][t].flag++;var r=n.countFlags(a);n.setState({board:a,flagCount:r})}},n.highlightNeighborCells=function(e,t){n.highlightTimeout&&window.clearTimeout(n.highlightTimeout);for(var a=[],r=-2;r<=2;r++)for(var o=-2;o<=2;o++)if(e+r>=0&&e+r<n.state.board.length&&t+o>=0&&t+o<n.state.board[e].length){if(0===r&&0===o)continue;var s="".concat(String(e+r).padStart(2,"0")).concat(String(t+o).padStart(2,"0"));if(2===Math.abs(o)||2===Math.abs(r))document.getElementById(s).classList.remove("highlighted");else{var i=n.state.board[e+r][t+o];i.flag%3!==0||i.open||(document.getElementById(s).classList.add("highlighted"),a.push(s))}}n.highlightTimeout=window.setTimeout(function(){n.clearAllHighlights(a)},5)},n.clearAllHighlights=function(e){n.state.board.forEach(function(t){t.forEach(function(t){var n="".concat(String(t.pos[0]).padStart(2,"0")).concat(String(t.pos[1]).padStart(2,"0"));e&&!e.includes(n)?document.getElementById(n).classList.remove("highlighted"):e||document.getElementById(n).classList.remove("highlighted")})})},n.mouseOver=function(){var e=Object(d.a)(h.a.mark(function e(t){var a,r,o;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.className.includes("cell")){e.next=3;break}return n.clearAllHighlights(),e.abrupt("return");case 3:a=JSON.parse(t.target.getAttribute("cellpos")),r=Number(a[0]),o=Number(a[1]),n.highlightNeighborCells(r,o);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.onMouseUp=function(e){if(n.clearAllHighlights(),n.canvas.removeEventListener("mouseover",n.mouseOver),e.target.className.includes("cell")){var t=n.state.board,a=JSON.parse(e.target.getAttribute("cellpos")),r=Number(a[0]),o=Number(a[1]),s=t[r][o];if(Date.now()-n.state.releaseTime<50)s.open&&n.openNeighborCells(r,o,t),n.setState({holdLeft:!1,holdRight:!1});else if(0===e.button){if(e.target.className.includes("cell")){var i=s.flag%3;s.open||n.state.holdRight||0!==i||n.openCell(r,o,t)}n.setState({holdLeft:!1,releaseTime:Date.now()})}else 2===e.button&&(n.state.holdLeft||(n.timer.state.start||!n.state.started||n.state.ended||n.timer.startTimer(),n.state.ended||n.setFlag(r,o,t)),n.setState({holdRight:!1,releaseTime:Date.now()}))}else 0===e.button?n.setState(function(e){if(e.holdLeft)return{holdLeft:!1,releaseTime:Date.now()}}):2===e.button&&n.setState({holdRight:!1,releaseTime:Date.now()})},n.onMouseDown=function(){var e=Object(d.a)(h.a.mark(function e(t){var a,r,o;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.button){e.next=5;break}return e.next=3,n.setState({holdLeft:!0});case 3:e.next=8;break;case 5:if(2!==t.button){e.next=8;break}return e.next=8,n.setState({holdRight:!0});case 8:a=n.state,r=a.holdLeft,o=a.holdRight,r&&o&&(n.mouseOver(t),n.canvas.addEventListener("mouseover",n.mouseOver));case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.clearBoard=function(){console.log("Clearing board."),n.canvas.removeEventListener("mouseup",n.onMouseUp),n.canvas.removeEventListener("mousedown",n.onMouseDown),n.setState({size:[],mineCount:0,board:[],started:!1,ended:!1})},n.startOver=function(){n.createBoard(),n.timer.clearTimer(),n.setState({started:!1,ended:!1,victory:!1})},n}return Object(b.a)(t,e),Object(g.a)(t,[{key:"componentWillUnmount",value:function(){this.canvas.removeEventListener("mouseup",this.onMouseUp),this.canvas.removeEventListener("mousedown",this.onMouseDown)}},{key:"render",value:function(){var e=this,t=this.state,n=t.size,a=(t.mineCount,t.board),o=t.started,s=t.holdLeft,i=t.ended;return r.a.createElement("div",{className:"minesweeper-container",ref:function(t){return e.canvas=t}},!n.length&&r.a.createElement("div",{className:"select-board"},r.a.createElement("button",{onClick:function(){return e.createBoard("small")}},"Easy (8x8)"),r.a.createElement("button",{onClick:function(){return e.createBoard("medium")}},"Medium (16x16)"),r.a.createElement("button",{onClick:function(){return e.createBoard("large")}},"Hard (30x30)")),!!n.length&&r.a.createElement("div",{className:"canvas",onContextMenu:function(e){return e.preventDefault(),!1}},r.a.createElement("div",{className:"minesweeper-menu"},r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{onClick:this.clearBoard},r.a.createElement("img",{alt:"back",src:"icons/back.svg",className:"icon"})),r.a.createElement("button",{className:"".concat(o&&!i?"":"hidden"),onClick:this.timer?this.timer.pauseTimer:null},r.a.createElement("img",{alt:"pause",src:"icons/pause.svg",className:"icon"})),r.a.createElement("button",{className:"".concat(o?"":"hidden"),onClick:this.startOver},r.a.createElement("img",{alt:"reset",src:"icons/reset.svg",className:"icon"}))),r.a.createElement("div",{className:"counter"},r.a.createElement("h3",null," Mines:")," ",r.a.createElement("h3",null,this.state.mineCount)),r.a.createElement("div",{className:"counter"},r.a.createElement("h3",null,"Flags:"),r.a.createElement("h3",null,this.state.flagCount)),r.a.createElement(E,{ref:function(t){return e.timer=t}})),r.a.createElement("div",{className:"board"},this.state.victory&&r.a.createElement("div",{className:"game-end-overlay"},r.a.createElement("h3",null,"You won in"),r.a.createElement("h3",null,this.timer.state.seconds.toFixed(1)," seconds!")),this.state.ended&&!this.state.victory&&r.a.createElement("div",{className:"game-end-overlay"},r.a.createElement("h3",null,"You lost in "),r.a.createElement("h3",null,this.timer.state.seconds.toFixed(1)," seconds!")),a.map(function(e,t){return r.a.createElement("div",{className:"board-row",key:t},e.map(function(e,n){return r.a.createElement("div",{className:"cell".concat(e.open?e.mine?" exploded":" open":s?" hover":"").concat(e.highlighted?" highlighted":""),id:"".concat(String(t).padStart(2,"0")).concat(String(n).padStart(2,"0")),cellpos:"[".concat(t,",").concat(n,"]"),key:"".concat(t,",").concat(n)},e.open?e.mine?"X":"".concat(e.neighborMines):e.flag%3===1?"f":e.flag%3===2?"?":null)}))}))))}}]),t}(a.Component);var C=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(c,null),r.a.createElement(u,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(i.a,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,1,2]]]);
//# sourceMappingURL=main.30275912.chunk.js.map