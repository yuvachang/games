(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,n){e.exports=n(35)},35:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(22),i=n.n(o),s=n(9);var c=function(){return r.a.createElement("div",{className:"menu"},r.a.createElement(s.b,{to:"/minesweeper"},"Minesweeper"))},l=n(7);function u(){return r.a.createElement(l.b,{render:function(){return r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/minesweeper",component:w}),r.a.createElement(l.a,{from:"/",to:"/minesweeper",component:function(){return null}}),r.a.createElement(l.a,{from:"*",to:"/",component:function(){return null}}))}})}var m=n(2),h=n.n(m),f=n(6),d=n(11),g=n(12),p=n(14),v=n(13),b=n(15),E=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={start:0,seconds:0,minutes:0,timer:"00:00.0",status:"clear"},n.startTimer=Object(f.a)(h.a.mark(function e(){var t;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.timerInterval||"cleared"===n.timerInterval){e.next=2;break}return e.abrupt("return");case 2:return t=n.state.seconds+60*n.state.minutes,e.next=5,setInterval(Object(f.a)(h.a.mark(function e(){var a,r,o,i;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.state.start||Date.now(),r=(Date.now()-a)/1e3+t,o=Math.floor(r/60),r-=60*o,i="".concat(String(o).padStart(2,"0"),":").concat(r.toFixed(1).padStart(4,"0")),e.next=7,n.setState({start:a,seconds:r,minutes:o,timer:i});case 7:case"end":return e.stop()}},e)})),100);case 5:n.timerInterval=e.sent;case 6:case"end":return e.stop()}},e)})),n.clearInterval=function(){clearInterval(n.timerInterval),n.timerInterval="cleared"},n.pauseTimer=Object(f.a)(h.a.mark(function e(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.clearInterval(),n.setState({start:0});case 2:case"end":return e.stop()}},e)})),n.clearTimer=function(){n.clearInterval(),n.setState({start:0,seconds:0,minutes:0,timer:"00:00.0"})},n}return Object(b.a)(t,e),Object(g.a)(t,[{key:"componentWillUnmount",value:function(){this.clearTimer()}},{key:"render",value:function(){var e=this.state,t=(e.start,e.timer);return r.a.createElement("div",{className:"timer"},r.a.createElement("h3",null,"Time: ",t))}}]),t}(a.Component),w=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={size:[],mineCount:0,flagCount:0,board:[],mineLocations:[],started:!1,ended:!1,victory:!1,holdLeft:!1,holdRight:!1,releaseTime:0},n.createBoard=function(){var e=Object(f.a)(h.a.mark(function e(t){var a,r,o,i,s,c;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.canvas.addEventListener("mouseup",n.onMouseUp),n.canvas.addEventListener("mousedown",n.onMouseDown),a=[n.state.size||0,n.state.mineCount||0,[]],r=a[0],o=a[1],i=a[2],t||n.state.size.length){e.next=5;break}return e.abrupt("return");case 5:for("small"===t?(r=[8,8],o=10):"medium"===t?(r=[16,16],o=40):"large"===t&&(r=[24,24],o=99),s=0;s<r[0];s++)for(i[s]=[],c=0;c<r[1];c++)i[s].push({mine:0,flag:0,open:0,neighborMines:0,pos:[s,c],highlighted:0});return n.setMines(r,o,i),console.log("Board initialized =>",i),e.next=11,n.setState({size:r,mineCount:o,board:i});case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.setMines=function(e,t,a,r,o){for(var i=r&&o?n.getNeighborCells(r,o,1,a).neighborPos:0,s=function(e){return Math.floor(Math.random()*e)},c=0;c<t;){var l=s(e[0]),u=s(e[1]);i&&i.includes("".concat(l).concat(u))||1!==a[l][u].mine&&(a[l][u].mine=1,c++)}return a=n.setNeighborCounts(a)},n.setNeighborCounts=function(e){for(var t=0,a=e.length;t<a;t++)for(var r=0,o=e[t].length;r<o;r++){var i=n.getNeighborCells(t,r,0,e).neighborMines;e[t][r].neighborMines=i}return e},n.getNeighborCells=function(e,t,n,a){for(var r=[],o=[],i=0,s=0,c=-1;c<=1;c++)for(var l=-1;l<=1;l++)if(e+c>=0&&e+c<a.length&&t+l>=0&&t+l<a[e].length){if(!n&&0===c&&0===l)continue;r.push(a[e+c][t+l]),o.push("".concat(String(e+c).padStart(2,"0")).concat(String(t+l).padStart(2,"0"))),i+=a[e+c][t+l].mine,a[e+c][t+l].flag%3===1&&s++}return{neighborPos:o,neighborCells:r,neighborMines:i,neighborFlags:s}},n.ensureSafeFirstClick=function(e,t,a){var r=n.getNeighborCells(e,t,1,a).neighborCells,o=0;return r.forEach(function(e){a[e.pos[0]][e.pos[1]].mine&&(a[e.pos[0]][e.pos[1]].mine=0,o++)}),n.setMines(n.state.size,o,a,e,t)},n.cascade=function(e,t,a){return n.getNeighborCells(e,t,0,a).neighborCells.forEach(function(e){var t=e.pos[0],r=e.pos[1];a[t][r].neighborMines?a[t][r].open||(a[t][r].open=1):a[t][r].neighborMines||a[t][r].open||(a[t][r].open=1,a=n.cascade(t,r,a))}),a},n.openNeighborCells=function(e,t,a){var r=a[e][t],o=n.getNeighborCells(e,t,0,a),i=o.neighborFlags,s=o.neighborCells;i===r.neighborMines&&s.forEach(function(e){e.flag||e.open||n.openCell(e.pos[0],e.pos[1],a)})},n.openAllMines=function(e){e.forEach(function(t){t.forEach(function(t){t.mine&&(e[t.pos[0]][t.pos[1]].open=1)})})},n.countOpenCells=function(e){var t=0;return e.forEach(function(e){e.forEach(function(e){e.open&&t++})}),t},n.openCell=function(){var e=Object(f.a)(h.a.mark(function e(t,a,r){var o,i,s,c;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.state.ended&&!r[t][a].open){e.next=2;break}return e.abrupt("return");case 2:return n.state.started||(r=n.ensureSafeFirstClick(t,a,r)),n.timer.state.start||n.timer.startTimer(),o=r[t][a],r[t][a].open=1,0!==o.neighborMines||o.mine||(r=n.cascade(t,a,r)),i=n.state.ended,s=n.state.victory,o.mine&&(i=!0,n.openAllMines(r)),c=n.state.size[0]*n.state.size[1]-n.state.mineCount,n.countOpenCells(r)===c&&(i=!0,s=!0),i&&n.timer.pauseTimer(),e.next=16,n.setState({board:r,ended:i,victory:s,started:!0});case 16:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),n.countFlags=function(e){var t=0;return e.forEach(function(e){e.forEach(function(e){e.flag%3===1&&t++})}),t},n.setFlag=function(e,t,a){if(!a[e][t].open&&n.state.started){a[e][t].flag++;var r=n.countFlags(a);n.setState({board:a,flagCount:r})}},n.highlightNeighborCells=function(e,t){n.highlightTimeout&&window.clearTimeout(n.highlightTimeout);for(var a=[],r=-2;r<=2;r++)for(var o=-2;o<=2;o++)if(e+r>=0&&e+r<n.state.board.length&&t+o>=0&&t+o<n.state.board[e].length){if(0===r&&0===o)continue;var i="".concat(String(e+r).padStart(2,"0")).concat(String(t+o).padStart(2,"0"));2===Math.abs(o)||2===Math.abs(r)?document.getElementById(i).classList.remove("highlighted"):!n.state.board[e+r][t+o].flag%3>0&&(document.getElementById(i).classList.add("highlighted"),a.push(i))}n.highlightTimeout=window.setTimeout(function(){n.clearAllHighlights(a)},5)},n.clearAllHighlights=function(e){n.state.board.forEach(function(t){t.forEach(function(t){var n="".concat(String(t.pos[0]).padStart(2,"0")).concat(String(t.pos[1]).padStart(2,"0"));e&&!e.includes(n)?document.getElementById(n).classList.remove("highlighted"):e||document.getElementById(n).classList.remove("highlighted")})})},n.mouseOver=function(){var e=Object(f.a)(h.a.mark(function e(t){var a,r,o;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=JSON.parse(t.target.getAttribute("cellpos")),r=Number(a[0]),o=Number(a[1]),n.highlightNeighborCells(r,o);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.onMouseUp=function(e){if(n.clearAllHighlights(),n.canvas.removeEventListener("mouseover",n.mouseOver),e.target.className.includes("cell")){var t=n.state.board,a=JSON.parse(e.target.getAttribute("cellpos")),r=Number(a[0]),o=Number(a[1]),i=t[r][o];if(Date.now()-n.state.releaseTime<50)i.open&&n.openNeighborCells(r,o,t),n.setState({holdLeft:!1,holdRight:!1});else if(0===e.button){if(e.target.className.includes("cell")){var s=i.flag%3;i.open||n.state.holdRight||0!==s||n.openCell(r,o,t)}n.setState({holdLeft:!1,releaseTime:Date.now()})}else 2===e.button&&(n.state.holdLeft||(n.timer.state.start||n.timer.startTimer(),n.setFlag(r,o,t)),n.setState({holdRight:!1,releaseTime:Date.now()}))}else 0===e.button?n.setState(function(e){if(e.holdLeft)return{holdLeft:!1,releaseTime:Date.now()}}):2===e.button&&n.setState({holdRight:!1,releaseTime:Date.now()})},n.onMouseDown=function(){var e=Object(f.a)(h.a.mark(function e(t){var a,r,o;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.button){e.next=5;break}return e.next=3,n.setState({holdLeft:!0});case 3:e.next=8;break;case 5:if(2!==t.button){e.next=8;break}return e.next=8,n.setState({holdRight:!0});case 8:a=n.state,r=a.holdLeft,o=a.holdRight,r&&o&&(n.mouseOver(t),n.canvas.addEventListener("mouseover",n.mouseOver));case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.clearBoard=function(){console.log("Clearing board."),n.canvas.removeEventListener("mouseup",n.onMouseUp),n.canvas.removeEventListener("mousedown",n.onMouseDown),n.setState({size:[],mineCount:0,board:[],started:!1,ended:!1})},n.startOver=function(){n.createBoard(),n.timer.clearTimer(),n.setState({started:!1,ended:!1,victory:!1})},n}return Object(b.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){this.canvas.removeEventListener("mouseup",this.onMouseUp),this.canvas.removeEventListener("mousedown",this.onMouseDown)}},{key:"render",value:function(){var e=this,t=this.state,n=t.size,a=(t.mineCount,t.board),o=(t.started,t.holdLeft);return r.a.createElement("div",{className:"minesweeper-container",ref:function(t){return e.canvas=t}},r.a.createElement("div",{className:"minesweeper-canvas"},!!n.length&&r.a.createElement("div",{className:"minesweeper-menu"},r.a.createElement("button",{onClick:this.clearBoard},"Change Difficulty"),r.a.createElement("h3",null,"Flags: ",this.state.flagCount,r.a.createElement("br",null)," Mines: ",this.state.mineCount),this.state.victory&&r.a.createElement("h3",null,"You won!"),this.state.ended&&!this.state.victory&&r.a.createElement("h3",null,"You lost!"),this.state.started&&r.a.createElement("button",{onClick:this.startOver},"Start Over"),this.state.started&&r.a.createElement("button",{onClick:this.timer.pauseTimer},"Pause Timer"),r.a.createElement(E,{ref:function(t){return e.timer=t}})),!n.length&&r.a.createElement("div",{className:"select-board"},r.a.createElement("button",{onClick:function(){return e.createBoard("small")}},"Easy (8x8)"),r.a.createElement("button",{onClick:function(){return e.createBoard("medium")}},"Medium (16x16)"),r.a.createElement("button",{onClick:function(){return e.createBoard("large")}},"Hard (30x30)")),!!n.length&&r.a.createElement("div",{className:"board",onContextMenu:function(e){return e.preventDefault(),!1}},a.map(function(e,t){return r.a.createElement("div",{className:"board-row",key:t},e.map(function(e,n){return r.a.createElement("div",{className:"cell".concat(e.open?" open":o?" hover":"").concat(e.highlighted?" highlighted":""),id:"".concat(String(t).padStart(2,"0")).concat(String(n).padStart(2,"0")),cellpos:"[".concat(t,",").concat(n,"]"),key:"".concat(t,",").concat(n),style:e.mine&&e.open?{color:"red",backgroundColor:"pink"}:null},e.open?e.mine?"X":"".concat(e.neighborMines):e.flag%3===1?"f":e.flag%3===2?"?":null)}))}))))}}]),t}(a.Component);var C=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(c,null),r.a.createElement(u,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(s.a,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,1,2]]]);
//# sourceMappingURL=main.0b2643bf.chunk.js.map